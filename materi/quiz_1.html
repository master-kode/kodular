                            correct: "B"
            },
            {
                question: "16. Inggris pernah memiliki pengaruh di wilayah...",
                options: [
                    "A. Maluku dan Jawa",
                    "B. Sebagian Sumatra dan Bencoolen",
                    "C. Bali dan Lombok",
                    "D. Kalimantan dan Sulawesi",
                    "E. Papua dan Maluku"
                ],
                correct: "B"
            },
            {
                question: "17. Organisasi militer/semimiliter yang dibentuk Jepang untuk melatih rakyat adalah...",
                options: [
                    "A. VOC",
                    "B. PETA",
                    "C. KNIL",
                    "D. TNI",
                    "E. APRA"
                ],
                correct: "B"
            },
            {
                question: "18. Kesultanan yang menyebabkan terhambatnya jalur perdagangan Eropa ke Asia adalah...",
                options: [
                    "A. Kesultanan Malaka",
                    "B. Kesultanan Aceh",
                    "C. Kesultanan Turki Utsmani",
                    "D. Kesultanan Demak",
                    "E. Kesultanan Mataram"
                ],
                correct: "C"
            },
            {
                question: "19. Dampak negatif Cultuurstelsel dalam bidang sosial adalah...",
                options: [
                    "A. Pembangunan infrastruktur",
                    "B. Penderitaan rakyat tani dan kelaparan",
                    "C. Munculnya kelas terdidik",
                    "D. Perbaikan sanitasi",
                    "E. Mobilitas sosial meningkat"
                ],
                correct: "B"
            },
            {
                question: "20. Perkembangan teknologi yang mendukung penjelajahan samudera bangsa Eropa adalah...",
                options: [
                    "A. Mesin uap dan telepon",
                    "B. Kapal yang lebih baik, kompas, dan alat pengukur astronomi",
                    "C. Pesawat terbang dan radio",
                    "D. Mobil dan kereta api",
                    "E. Komputer dan internet"
                ],
                correct: "B"
            }
        ];

        // Variabel state aplikasi
        let currentQuestionIndex = 0;
        let userAnswers = Array(questions.length).fill(null);
        let timeLeft = 180; // 3 menit dalam detik
        let timerInterval;
        let scores = Array(questions.length).fill(0);
        let startTime;

        // Elemen DOM
        const startScreen = document.getElementById('start-screen');
        const quizScreen = document.getElementById('quiz-screen');
        const resultScreen = document.getElementById('result-screen');
        const startBtn = document.getElementById('start-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const finishBtn = document.getElementById('finish-btn');
        const restartBtn = document.getElementById('restart-btn');
        const questionText = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const questionCounter = document.getElementById('question-counter');
        const timer = document.getElementById('timer');
        const progressBar = document.getElementById('progress-bar');
        const totalScoreEl = document.getElementById('total-score');
        const correctAnswersEl = document.getElementById('correct-answers');
        const maxScoreEl = document.getElementById('max-score');
        const scorePercentageEl = document.getElementById('score-percentage');
        const resultCircle = document.getElementById('result-circle');

        // Fungsi untuk memulai kuis
        function startQuiz() {
            startScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            currentQuestionIndex = 0;
            userAnswers = Array(questions.length).fill(null);
            scores = Array(questions.length).fill(0);
            loadQuestion();
            startTimer();
        }

        // Fungsi untuk memuat soal
        function loadQuestion() {
            const question = questions[currentQuestionIndex];
            questionText.textContent = question.question;
            questionCounter.textContent = `Soal ${currentQuestionIndex + 1} dari ${questions.length}`;
            
            // Update progress bar
            const progress = ((currentQuestionIndex + 1) / questions.length) * 100;
            progressBar.style.width = `${progress}%`;
            
            // Reset dan isi opsi jawaban
            optionsContainer.innerHTML = '';
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('button');
                optionElement.className = `w-full text-left p-4 rounded-lg border-2 transition-all duration-300 ${userAnswers[currentQuestionIndex] === String.fromCharCode(65 + index) ? 'border-purple-500 bg-purple-50' : 'border-gray-200 hover:border-purple-300'}`;
                optionElement.textContent = option;
                optionElement.dataset.option = String.fromCharCode(65 + index); // A, B, C, D, E
                
                // Jika jawaban sudah dipilih, tampilkan warna yang sesuai
                if (userAnswers[currentQuestionIndex] !== null) {
                    if (optionElement.dataset.option === question.correct) {
                        optionElement.classList.add('bg-green-100', 'border-green-500');
                    } else if (userAnswers[currentQuestionIndex] === optionElement.dataset.option && userAnswers[currentQuestionIndex] !== question.correct) {
                        optionElement.classList.add('bg-red-100', 'border-red-500');
                    }
                }
                
                optionElement.addEventListener('click', () => selectOption(optionElement));
                optionsContainer.appendChild(optionElement);
            });
            
            // Update status tombol navigasi
            prevBtn.disabled = currentQuestionIndex === 0;
            
            // Sembunyikan tombol next karena sekarang otomatis lanjut
            nextBtn.classList.add('hidden');
            
            if (currentQuestionIndex === questions.length - 1) {
                finishBtn.classList.remove('hidden');
            } else {
                finishBtn.classList.add('hidden');
            }
        }

        // Fungsi untuk memilih opsi jawaban
        function selectOption(optionElement) {
            // Jika sudah menjawab, tidak bisa mengubah jawaban
            if (userAnswers[currentQuestionIndex] !== null) return;
            
            const selectedOption = optionElement.dataset.option;
            userAnswers[currentQuestionIndex] = selectedOption;
            
            // Hitung skor berdasarkan waktu
            const elapsedTime = 180 - timeLeft; // Waktu yang telah berlalu dalam detik
            const question = questions[currentQuestionIndex];
            
            if (selectedOption === question.correct) {
                // Jika jawaban benar dalam waktu <= 3 menit (180 detik)
                if (elapsedTime <= 180) {
                    scores[currentQuestionIndex] = 5;
                } else {
                    scores[currentQuestionIndex] = 4;
                }
            } else {
                scores[currentQuestionIndex] = 0;
            }
            
            // Tampilkan jawaban yang benar dan salah
            const options = optionsContainer.querySelectorAll('button');
            options.forEach(opt => {
                if (opt.dataset.option === question.correct) {
                    opt.classList.add('bg-green-100', 'border-green-500');
                } else if (opt.dataset.option === selectedOption && selectedOption !== question.correct) {
                    opt.classList.add('bg-red-100', 'border-red-500');
                }
                opt.classList.remove('hover:border-purple-300');
            });
            
            // Otomatis lanjut ke soal berikutnya setelah 1 detik
            setTimeout(() => {
                if (currentQuestionIndex < questions.length - 1) {
                    currentQuestionIndex++;
                    loadQuestion();
                    startTimer();
                } else {
                    finishQuiz();
                }
            }, 1000);
        }

        // Fungsi untuk memulai timer
        function startTimer() {
            timeLeft = 180;
            startTime = Date.now();
            updateTimerDisplay();
            
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                updateTimerDisplay();
                
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    // Jika waktu habis dan belum menjawab, beri nilai 0
                    if (userAnswers[currentQuestionIndex] === null) {
                        userAnswers[currentQuestionIndex] = 'timeout';
                        scores[currentQuestionIndex] = 0;
                    }
                    // Otomatis lanjut ke soal berikutnya
                    if (currentQuestionIndex < questions.length - 1) {
                        currentQuestionIndex++;
                        loadQuestion();
                        startTimer();
                    } else {
                        finishQuiz();
                    }
                }
            }, 1000);
        }

        // Fungsi untuk memperbarui tampilan timer
        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timer.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Ubah warna timer jika waktu hampir habis
            if (timeLeft <= 30) {
                timer.classList.add('text-red-500');
            } else {
                timer.classList.remove('text-red-500');
            }
        }

        // Fungsi untuk pindah ke soal sebelumnya
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                loadQuestion();
                // Timer tidak direset saat pindah soal
            }
        }

        // Fungsi untuk menyelesaikan kuis
        function finishQuiz() {
            clearInterval(timerInterval);
            quizScreen.classList.add('hidden');
            resultScreen.classList.remove('hidden');
            showResults();
        }

        // Fungsi untuk menampilkan hasil
        function showResults() {
            const totalScore = scores.reduce((sum, score) => sum + score, 0);
            const correctAnswers = userAnswers.filter((answer, index) => 
                answer === questions[index].correct
            ).length;
            const maxScore = questions.length * 5;
            const percentage = Math.round((totalScore / maxScore) * 100);
            
            totalScoreEl.textContent = totalScore;
            correctAnswersEl.textContent = `${correctAnswers} / ${questions.length}`;
            maxScoreEl.textContent = maxScore;
            scorePercentageEl.textContent = `${percentage}%`;
            
            // Animasikan lingkaran hasil
            const circumference = 2 * Math.PI * 15.9155;
            const dashOffset = circumference - (percentage / 100) * circumference;
            resultCircle.style.strokeDasharray = `${circumference} ${circumference}`;
            resultCircle.style.strokeDashoffset = circumference;
            
            setTimeout(() => {
                resultCircle.style.transition = 'stroke-dashoffset 1.5s ease-in-out';
                resultCircle.style.strokeDashoffset = dashOffset;
            }, 500);
        }

        // Event Listeners
        startBtn.addEventListener('click', startQuiz);
        prevBtn.addEventListener('click', prevQuestion);
        finishBtn.addEventListener('click', finishQuiz);
        restartBtn.addEventListener('click', () => {
            resultScreen.classList.add('hidden');
            startScreen.classList.remove('hidden');
        });

        // Inisialisasi
        document.addEventListener('DOMContentLoaded', () => {
            // Kode inisialisasi tambahan jika diperlukan
        });
    </script>
</body>
</html>
